<div ng-controller="DoctorController" style="position:relative; font-family:Arial, sans-serif; color:#333;">

  <style>
    .doctor-actions {
      display: flex;
      gap: 8px;
      justify-content: center;
    }
    .doctor-btn-edit {
      padding: 4px 10px;
      background: #4CAF50;
      color: #fff;
      border: none;
      border-radius: 3px;
      cursor: pointer;
      font-size: 12px;
    }
    .doctor-btn-delete {
      padding: 4px 10px;
      background: #E74C3C;
      color: #fff;
      border: none;
      border-radius: 3px;
      cursor: pointer;
      font-size: 12px;
    }
  </style>

  <!-- Header + Search + Add Doctor Button -->
  <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
    <h3 style="margin:0; color:#2B547D;">Doctor List</h3>

    <div style="display:flex; align-items:center; gap:10px;">
      <!-- Search Input with Icon -->
      <div style="position:relative;">
        <input type="text" ng-model="searchText" placeholder="Search..." style="padding:6px 30px 6px 10px; border:1px solid #ccc; border-radius:4px; width:200px;">
        <i class="fas fa-search" style="position:absolute; right:8px; top:50%; transform:translateY(-50%); color:#777; cursor:pointer;"
           ng-click="searchFunction()"></i>
      </div>

      <!-- Add Button -->
      <button ng-click="openAddPopup()" style="padding:8px 15px; background:#2B547D; color:#fff; border:none; border-radius:4px; cursor:pointer;">+ Add</button>
    </div>
  </div>

  <!-- Add Doctor Popup -->
  <div ng-show="showAddPopup" style="position:absolute; top:80px; right:0; width:360px; padding:20px; background:#fff; border:1px solid #2B547D; border-radius:6px; box-shadow:0 4px 12px rgba(0,0,0,0.15); z-index:100;">
    <h4 style="margin-bottom: 20px; color:#2B547D;">Add Doctor</h4>
    <form ng-submit="addDoctor()">
      <div style="margin-bottom:12px;">
        <label style="display:block; font-weight:bold; margin-bottom:5px;">Doctor ID</label>
        <input type="number" ng-model="newDoctor.id" placeholder="Doctor ID" style="width:100%; padding:8px; border:1px solid #ccc; border-radius:4px;" required>
      </div>
      <div style="margin-bottom:12px;">
        <label style="display:block; font-weight:bold; margin-bottom:5px;">Name</label>
        <input type="text" ng-model="newDoctor.name" placeholder="Doctor Name" style="width:100%; padding:8px; border:1px solid #ccc; border-radius:4px;" required>
      </div>
      <div style="margin-bottom:12px;">
        <label style="display:block; font-weight:bold; margin-bottom:5px;">Specialization</label>
        <input type="text" ng-model="newDoctor.specialization" placeholder="Specialization" style="width:100%; padding:8px; border:1px solid #ccc; border-radius:4px;">
      </div>
      <div style="margin-bottom:12px;">
        <label style="display:block; font-weight:bold; margin-bottom:5px;">Phone</label>
        <input type="text" ng-model="newDoctor.phone" placeholder="Phone" style="width:100%; padding:8px; border:1px solid #ccc; border-radius:4px;" required>
      </div>
      <div style="margin-bottom:12px;">
        <label style="display:block; font-weight:bold; margin-bottom:5px;">Email</label>
        <input type="email" ng-model="newDoctor.email" placeholder="Email" style="width:100%; padding:8px; border:1px solid #ccc; border-radius:4px;">
      </div>
      <div style="text-align:right;">
        <button type="button" ng-click="closeAddPopup()" style="margin-right:8px; padding:6px 12px; border:none; border-radius:4px; background:#7F9DB9; color:#fff; cursor:pointer;">Cancel</button>
        <button type="submit" style="padding:6px 12px; border:none; border-radius:4px; background:#2B547D; color:#fff; cursor:pointer;">Add</button>
      </div>
    </form>
  </div>

  <!-- Edit Doctor Popup -->
  <div ng-show="showEditDoctorPopup" style="position:absolute; top:80px; right:115px; width:360px; padding:20px; background:#fff; border:2px solid #4CAF50; border-radius:6px; box-shadow:0 4px 12px rgba(0,0,0,0.15); z-index:150;">
    <h4 style="margin-bottom:20px; color:#4CAF50;">Edit Doctor</h4>
    <form ng-submit="updateDoctor()">
      <div style="margin-bottom:12px;">
        <label style="display:block; font-weight:bold; margin-bottom:5px;">Doctor ID</label>
        <input type="number" ng-model="editDoctor.id" readonly style="width:100%; padding:8px; border:1px solid #ccc; border-radius:4px;">
      </div>
      <div style="margin-bottom:12px;">
        <label style="display:block; font-weight:bold; margin-bottom:5px;">Name</label>
        <input type="text" ng-model="editDoctor.name" style="width:100%; padding:8px; border:1px solid #ccc; border-radius:4px;" required>
      </div>
      <div style="margin-bottom:12px;">
        <label style="display:block; font-weight:bold; margin-bottom:5px;">Specialization</label>
        <input type="text" ng-model="editDoctor.specialization" style="width:100%; padding:8px; border:1px solid #ccc; border-radius:4px;">
      </div>
      <div style="margin-bottom:12px;">
        <label style="display:block; font-weight:bold; margin-bottom:5px;">Phone</label>
        <input type="text" ng-model="editDoctor.phone" style="width:100%; padding:8px; border:1px solid #ccc; border-radius:4px;" required>
      </div>
      <div style="margin-bottom:12px;">
        <label style="display:block; font-weight:bold; margin-bottom:5px;">Email</label>
        <input type="email" ng-model="editDoctor.email" style="width:100%; padding:8px; border:1px solid #ccc; border-radius:4px;">
      </div>
      <div style="text-align:right;">
        <button type="button" ng-click="closeEditDoctorPopup()" style="margin-right:8px; padding:6px 12px; border:none; border-radius:4px; background:#7F9DB9; color:#fff; cursor:pointer;">Cancel</button>
        <button type="submit" style="padding:6px 12px; border:none; border-radius:4px; background:#4CAF50; color:#fff; cursor:pointer;">Update</button>
      </div>
    </form>
  </div>

  <!-- Doctor Table -->
  <div class="table-container" style="margin-top:20px; overflow-x:auto;">
    <table style="width:100%; border-collapse:collapse; table-layout:fixed; border:2px solid #d4cbcb; background:#d4cbcb; box-shadow:0 2px 6px rgba(0,0,0,0.05);">
      <thead>
        <tr style="background:#2B547D; color:#fff; text-align:left;">
          <th style="width:8%; padding:10px; border-right:1px solid #1F3E5B;">ID</th>
          <th style="width:22%; padding:10px; border-right:1px solid #1F3E5B;">Name</th>
          <th style="width:22%; padding:10px; border-right:1px solid #1F3E5B;">Specialization</th>
          <th style="width:18%; padding:10px; border-right:1px solid #1F3E5B;">Phone</th>
          <th style="width:20%; padding:10px; border-right:1px solid #1F3E5B;">Email</th>
           <th style="padding:10px; width:150px;">Actions</th> <!-- wider space -->
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="doctor in pagedDoctors() | filter:searchText" style="border-bottom:1px solid #ccc; background:#fafafa;">
          <td style="padding:10px; word-wrap:break-word; border-right:1px solid #ccc;">{{ doctor.id }}</td>
          <td style="padding:10px; word-wrap:break-word; border-right:1px solid #ccc;">{{ doctor.name }}</td>
          <td style="padding:10px; word-wrap:break-word; border-right:1px solid #ccc;">{{ doctor.specialization }}</td>
          <td style="padding:10px; word-wrap:break-word; border-right:1px solid #ccc;">{{ doctor.phone }}</td>
          <td style="padding:10px; word-wrap:break-word; border-right:1px solid #ccc;">{{ doctor.email }}</td>
          <td style="padding:8px;">
            <div class="doctor-actions">
              <button class="doctor-btn-edit" ng-click="openEditDoctorPopup(doctor)">Edit</button>
              <button class="doctor-btn-delete" ng-click="deleteDoctor(doctor.id)">Delete</button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>

    <!-- Pagination -->
    <div class="pagination" style="margin-top:15px; text-align:right;">
      <button ng-disabled="currentPage == 1" ng-click="prevPage()" style="padding:6px 12px; margin-right:5px; border:none; border-radius:4px; background:#2B547D; color:#fff; cursor:pointer;">Prev</button>
      <span style="margin:0 10px; font-weight:bold;">Page {{ currentPage }} of {{ totalPages() }}</span>
      <button ng-disabled="currentPage == totalPages()" ng-click="nextPage()" style="padding:6px 12px; border:none; border-radius:4px; background:#2B547D; color:#fff; cursor:pointer;">Next</button>
    </div>
  </div>

</div>
